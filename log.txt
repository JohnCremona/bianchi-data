Log of systematic runs.

=====================NEWFORMS====================================

Running tmanin to find rational newforms for all levels (including
conjugates).   One file per level in field_label/level_label

1. (2014) All levels:
          all fields, norms up to 10000, 25 eigenvalues.

2. (2016) Prime levels:
          all fields, primes only:
          2.0.4.1: norms up to 300000
          2.0.7.1, 2.0.11.1, 2.0.8.1, 2.0.3.1: norms up to 100000

3. (2017) All levels:
          2.0.4.1,  norms 10001-100000 complete & uploaded
          2.0.8.1,  norms 10001-50000  complete & uploaded.
          2.0.3.1,  norms 10001-150000 complete & uploaded
          2.0.7.1,  norms 10001-50000  complete & uploaded
          2.0.11.1, norms 10001-50000  complete & uploaded

4. (2021) Q(sqrt(-19)), Q(sqrt(-43))

make tmanin_loop nflist_loop
# 100 ap, level norms 1-1000:
echo 19 0 1 100 1 1 1 1000 | ./tmanin_loop > tmanin.19.out &
grep DIM tmanin.19.out | sed 's/DIMTAB //' > ~/bianchi-data/dims/dimtabeis.19.1-1000
echo 19 -1 1 1000 | ./nflist_loop >  ~/bianchi-data/newforms/newforms.19.1-1000
# See further instructions below

Run 1: 1-1000 complete, 211 newforms, found all 211 curves
Run 2: 1001-8427 complete, 1873 newforms, found 1871/1873 curves
                           missing (44-3a), (41+3a) (these are conjugate)
                           No elliptic curves have the specified 'Traces'
Run 3: 8248-10000 complete, 462 newforms, found all 462 curves

Run 4: On Galois: 10000-15000 in batches of 500, combined output in
tmanin.19.out.10001-15000, made dimtabeis and newforms files.
Updating newdims file: done
Curve search 10k-15k: done, all found: 1386 in IQF/rawcurves.2.0.19.1.10k-15k
Curve processing:
make_all_data_files(read_curves_magma("../IQF/rawcurves.2.0.19.1.10k-15k"),
field_type="IQF", field_label="2.0.19.1.10k-15k", verbose=0) done (on galois).

43: 1-10000 complete, 719 newforms, committed
dimtabnew: done, committed
search: run, 688 curves found, 31 "no curve found"

No elliptic curves have the specified 'Traces' for 31 newforms.  These
include all twists by an off quadratic character (chi(-1)=-1) of thr
"minusform" at level 1.

Curve processing...done

Run 2: 10k-15k on galois & lehner

10k-11k: done tmanin.43.out.10001-11000 on galois
11k-15k: done parallel*10 on lehner

10k-15k: 345 newforms
10k-11k:  462 levels
11k-15k: 1925 levels
10k-15k: 2387 levels in bianchi-data/dims/dimtabeis.43.10001-15000

Forms with no curve to 10k:

2.0.43.1-121.1-a 2.0.43.1-121.3-a 2.0.43.1-256.1-c 2.0.43.1-256.1-d
2.0.43.1-256.1-e 2.0.43.1-256.1-f 2.0.43.1-529.3-a 2.0.43.1-529.1-a
2.0.43.1-961.3-a 2.0.43.1-961.1-a 2.0.43.1-1849.1-b 2.0.43.1-1936.1-a
2.0.43.1-1936.3-a 2.0.43.1-2209.3-a 2.0.43.1-2209.1-a
2.0.43.1-3481.3-a 2.0.43.1-3481.1-a 2.0.43.1-4096.1-d
2.0.43.1-4096.1-e 2.0.43.1-4096.1-f 2.0.43.1-4096.1-g
2.0.43.1-4489.3-a 2.0.43.1-4489.1-a 2.0.43.1-6241.3-a
2.0.43.1-6241.1-a 2.0.43.1-6889.3-a 2.0.43.1-6889.1-a
2.0.43.1-8464.3-a 2.0.43.1-8464.1-a 2.0.43.1-9801.1-a
2.0.43.1-9801.3-a

10k-15k: 341 curves found; 4 newforms have no curve: 10609.3-a
                                                     10609.1-a
                                                     11449.1-a
                                                     11449.3-a
67:
On galois
1-10000 done, output in tmanin.67.out.1-10000
newforms file: done (451)
dims files: done
curve search: done (all 451)
curve processing: done, and all data uploaded

163:
1-1000 complete, 26 newforms, all curves found and processed.
All bmf dims and forms and curves on LMFDB beta.
1001-5000 complete, 85 newforms, 85 curves found, processed.

===========================================================================
odd class numbers >1: d = 23, 31, 47, 59, 71, 79, 83
===========================================================================

23:
1-1000 complete,  930 newforms,      all curves found, processed, uploaded.
 -2000 complete, 1384 more newforms, all curves found, processed, uploaded.
 -3000 complete, 1429 more newforms, all curves found, processed, uploaded.

31: 1-5000 complete, 5163 newforms, all curves found, processed,
uploaded.  reached 5120.19

47: 1-1000 complete, 1288 newforms, all curves found, processed,
uploaded.

59: 1-1000 complete, 564 newforms, 562/564 curves found, processed,
uploaded.  1001-1200 complete, 109 newforms.  No curve search yet.

newform 2.0.59.1-675.5-b has no curve (bc=-1, cm=0)
newform 2.0.59.1-675.8-b has no curve (bc=-1, cm=0)

71: 1-1000 complete, 1774 newforms, all curves found, processed,
uploaded.

79: 1-1000 complete, 802 newforms, all curves found, processed,
uploaded.

83: 1-1000 complete, 302 newforms, all curves found, processed,
uploaded.

===========================================================================
even class numbers: d = 5, 6, 10, 13, 14, 15, 17, 21, 22, 35, 39, 51,
                        55, 87, 91, 95
                    D = 20, 24, 40, 52, 56, 15, 68, 84, 88, 35, 39,
                        51, 55, 87, 91, 95
===========================================================================

5: 1-1000 complete, 660 newforms, all curves found, processed,
committed, uploaded.

6: 1-1000 done, 514 newforms, all curves found, processed, committed,
uploaded.

10: 1-1000 done. 338 newforms,curve search complete, processed,
committed, uploaded.

13: 1-1000 done. 290 newforms, curve search complete, processed,
committed, uploaded.

14: 1-1000 done. 862 newforms, data committed & pushed. Curve search:
856/862 found, 6 missing, processed, committed, uploaded.

newform 2.0.56.1-127.1-a has no curve (bc=0, cm=0)
newform 2.0.56.1-127.1-b has no curve (bc=0, cm=0)
newform 2.0.56.1-127.2-a has no curve (bc=0, cm=0)
newform 2.0.56.1-127.2-b has no curve (bc=0, cm=0)
newform 2.0.56.1-529.1-a has no curve (bc=-2, cm=-7)
newform 2.0.56.1-529.3-a has no curve (bc=-2, cm=-7)

15: 1-1000 done. 691 newforms, curve search complete, processed,
committed, uploaded.

17 1-1000 done. 776 newforms, comitted and pushed. Curve search found
 772/776, processed, committed, uploaded.

newform 2.0.68.1-901.1-a has no curve (bc=0, cm=0)
newform 2.0.68.1-901.1-b has no curve (bc=0, cm=0)
newform 2.0.68.1-901.2-a has no curve (bc=0, cm=0)
newform 2.0.68.1-901.2-b has no curve (bc=0, cm=0)

21: 1-1000 done, 688 newforms, curve search complete, processed,
committed, uploaded.

22: 1-1000 done. 209 newforms, curve search complete, processed,
committed, uploaded.

35: 1-1000 done. 431 newforms, curve search complete, processed,
committed, uploaded.

39 1-1000: done, 1182 newforms, committed & pushed.  Curve search
 complete, all 1182 found, processed, committed, uploaded.

51: 1-1000 done. 304 newforms, curve search complete, processed,
committed, uploaded.

55 1-1000 done, 863 newforms, committed & pushed. Curve search
 complete, all 863 found, processed, comitted, uploaded.

87 1-1000 done, committed, 1018 newforms. Curve search complete, all
 1018 found, processed, committed, uploaded.

91: 1-1000 done. 219 newforms, curve search found 217/219 curves,
 processed, committed, uploaded.

newform 2.0.91.1-784.1-a has no curve (bc=-6, cm=0)
newform 2.0.91.1-784.1-b has no curve (bc=-6, cm=0)

95: 1-1000 done. 1759 newforms, committed and pushed.  Curve search
 found 1757/1759, processed, committed, uploaded.

Missing curves: Stuck on 624.5-c and 624.5-d (twists)
newform 2.0.95.1-624.5-c has no curve (bc=0, cm=0)
newform 2.0.95.1-624.5-d has no curve (bc=0, cm=0)

Fields of |disc|<250:

export DD1="103 107 111 115 119 123 127 131 139 143 151 155 159 167 179 183 187 191 195 199 203 211 215 219 223 227 231 235 239 247"
export dd2="26 29 30 33 34 37 38 41 42 46 53 57 58 61 62"
export DD2="104 116 120 132 136 148 152 164 168 184 212 228 232 244 248"
export dd="${DD1} ${dd2}"
export DD="${DD1} ${DD2}"

========================MISSING CURVES (class number >1)============================

Class number 1, Euclidean: 40, listed in detail in paper with Pacetti et all
2.0.4.1:  4: none are bct but have associated genus 2 QM curves by Schembri
2.0.8.1:  8: all are bct
2.0.3.1: 21: 9 are bct and 12 have associated genus 2 QM curves by Schembri
2.0.7.1:  7: 5 all are bct

Class number 1, Non-Euclidean:
2.0.19.1: 2: 1849.1-a, 1849.3, NOT bct
2.0.43.1:31: all bct

Class number >1:

2.0.56.1-127.1-a NOT twist of bc "No elliptic curve"
2.0.56.1-127.1-b "
2.0.56.1-127.2-a "
2.0.56.1-127.2-b "
2.0.56.1-529.1-a twist of bc of Q(sqrt(7)), CM "No elliptic curve"
2.0.56.1-529.3-b "
2.0.59.1-675.5-b twist of bc of Q "No elliptic curve"
2.0.59.1-675.8-b "
2.0.68.1-901.1-a NOT twist of bc "No elliptic curve"
2.0.68.1-901.1-b "
2.0.68.1-901.2-a "
2.0.68.1-901.2-b "
2.0.91.1-784.1-a twist of bc of Q(sqrt(6)) "No elliptic curve"
2.0.91.1-784.1-b "
2.0.95.1-624.5-c NOT twist of bc "missing"
2.0.95.1-624.5-d "


NB
2.0.59.1-675.5-b: (+/-)aP+2p = 4, 9, 9, ...
2.0.59.1-675.8-b: (+/-)aP+2p = 4, 9, 9, ...


========================DIMENSION TABLES============================

dimtable: table of all/plus/minus dimensions of weight 2 cusp forms

dims/alldims.*.1-1000: output for level norms up to 1000

dimtabeis: table of plus- dimensions only including eisenstein

dims/dimtabeis.*.out.*: output in range
                        1: 1-50000
                        2: 1-20000
                        3: 1-50000
                        7: 1-20000
                        11: 1-20000

dims/dimtabeis.*.out.*.newdims: output including new cuspidal dimension in range

dimtabnew:  table of trivial character subspace dimensions (field, weight, cuspidal dim, new cuspidal dim)

======================== HOWTO ADD MORE COMPUTED DATA TO DATABASE ============================

After computing Bianchi newforms for field d, levels from N1 to N2:

1. In bianchi-progs directory:

   export d=79
   export D=79
   export N1=1001
   export N2=5000
   echo $d -1 $N1 $N2 | ./nflist_loop >  ~/bianchi-data/newforms/newforms.$d.$N1-$N2
   wc -l ~/bianchi-data/newforms/newforms.$d.$N1-$N2
   grep data ~/bianchi-data/newforms/newforms.$d.$N1-$N2

   (count using wc -l and check that "data" is not in that file)

2.
   Assuming that we have used tmanin_loop on a range of levels N1-N2,
   there will be an output file called dimtabeis.$d.$N1-$N2. We no
   longer need this for LMFDB upload since we can run dimtabnew (up to
   level norm N2) making a file like dimtabeis.d.all.newdims but
   omitting cols 4 (full dimension) and 7 (eisenstein dimension),
   i.e. just
   field weight level dimcusp dimcuspnew
   e.g.
   23      2       6.1             1               1
   instead of
   23      2       6.1     12      1       1       11

   Instead of:
   mv ~/bianchi-progs/dimtabeis.$d.$N1-$N2 ~/bianchi-data/dims/
   cd ~/bianchi-data/dims/
   cat dimtabeis.$d.$N1-$N2 >> dimtabeis.$d.all
   cd ~/bianchi-progs
   sage
   sage: %runfile bianchi.py
   sage: d=19
   sage: # make dimtabeis.d.all.newdims
   sage: make_dimtabnew(d,"/home/jec/bianchi-data/dims/dimtabeis.{}.all".format(d))

   we can now do this:
   echo $d $N2 | ./dimtabnew >  ~/bianchi-data/dims/dimtabnew.${d}.1-${N2}

   Now follow instructions at the end of bianchi-progs/bianchi.py to
   make the LMFDB upload files:

# e.g. (assumes directory ~/bmf-upload exists)
# sage: %runfile bianchi.py
# sage: d=43 # square-free
# sage: D=43 # abs(disc), either d or 4*d
# sage: N1=1
# sage: N2=1000
# sage: # either (old style)
# sage: dimdat = read_dimtabeis_new(d, "dimtabeis.{}.all.newdims".format(d))
# sage: # or (new style)
# sage: dimdat = read_dimtabeis_new(d, "dimtabnew.{}.{}-{}".format(d, N1, N2))
# sage: sl2_levels = []
# sage: if D in [1,2,3,7,11,19,43,67,163,20]:
# sage:    sl2_levels = read_data("sl2_levels_{}".format(D), str)
# sage:    write_bmf_upload_file(dimdat, "bmf_dims.{}.{}-{}.sl2".format(d,N1,N2), 'dims', sl2=True)
# sage: write_bmf_upload_file(dimdat, "bmf_dims.{}.{}-{}.no_sl2".format(d,N1,N2), 'dims', sl2=False)
# sage: formdat = read_newforms(d, "newforms.{}.{}-{}".format(d,N1,N2))
# sage: write_bmf_upload_file(formdat, "bmf_forms.{}.{}-{}".format(d,N1,N2), 'forms', True)

# Copy the three files to legendre in bmf-upload/.
# Do the upload as follows:
# sage: from lmfdb import db
# sage: d=43
# sage: N1=1
# sage: N2=1000
# sage: db.bmf_forms.copy_from("/scratch/home/jcremona/bmf-upload/bmf_forms.{}.{}-{}".format(d,N1,N2))
# sage: db.bmf_dims.update_from_file("/scratch/home/jcremona/bmf-upload/bmf_dims.{}.{}-{}.sl2".format(d,N1,N2))
# sage: db.bmf_dims.copy_from("/scratch/home/jcremona/bmf-upload/bmf_dims.{}.{}-{}.no_sl2".format(d,N1,N2))


3. cd ~/bianchi-data
   git add 2.0.$D.1 # add the raw newform data files
   git add newforms/newforms.$d.$N1-$N2
   git add dims/dimtabnew.${d}.1-${N2}
   # or git add dims/dimtabeis.${d}.all
   git commit -m "..."
   git push origin master

4. (Can be done on another machine, if so "git pull origin master" in bianchi-data first)

   cd ecnf-data/sage
   sage
   sage: %runfile search.py
   sage: # field: int, e.g. 19
   sage: magma_search(field,bmf_filename="...", outfilename="...", verbose=False)
   sage: # eg
   sage: d=5
   sage: D=20
   sage: magma_search(d, bmf_filename="/home/jec/bianchi-data/newforms/newforms.{}.1-1000".format(d), outfilename="rawcurves.2.0.{}.1".format(D), verbose=True)

   Move the rawcurves file to ECNF_DIR/IQF
   Add the field if necessary to ECNF_DIR/sage/ecnf_fields and ECNF_DIR/IQF/fields.txt
   Process the raw curves file:

   sage: %runfile files.py
   sage: d=6
   sage: D=24
   sage: field_label = '2.0.{}.1'.format(D)
   sage: rawcurvesfile = ".".join(['rawcurves', field_label])
   sage: data = read_curves_magma(ECNF_DIR+"/IQF/"+rawcurvesfile)
   sage: curves = make_all_data_files1(data, field_type='IQF', field_label=field_label, verbose=0, prec=128)

   sage: # to make upload files
   sage: %runfile upload.py
   sage: make_upload_file(['IQF'], [field_label], outfilename='ec_nfcurves.'+field_label)

# Do the upload as follows:
# sage: from lmfdb import db
# sage: D=43 # discriminant, as in field label
#
# Either (for a new field) upload all curves in a file:
#
# sage: db.ec_nfcurves.copy_from("/scratch/home/jcremona/ecnf-upload/ec_nfcurves.2.0.{}.1".format(D))
#
# Or (for an existing field), upload curves in a file):
#
# sage: N1=1
# sage: N2=1000
# sage: db.ec_nfcurves.copy_from("/scratch/home/jcremona/ecnf-upload/ec_nfcurves.2.0.{}.1.{}-{}".format(D,N1,N2))
