Log of systematic runs.

=====================NEWFORMS====================================

Running tmanin to find rational newforms for all levels (including
conjugates).   One file per level in field_label/level_label

1. (2014) All levels:
          all fields, norms up to 10000, 25 eigenvalues.

2. (2016) Prime levels:
          all fields, primes only:
          2.0.4.1: norms up to 300000
          2.0.7.1, 2.0.11.1, 2.0.8.1, 2.0.3.1: norms up to 100000

3. (2017) All levels:
          2.0.4.1,  norms 10001-100000 complete & uploaded
          2.0.8.1,  norms 10001-50000  complete & uploaded.
          2.0.3.1,  norms 10001-150000 complete & uploaded
          2.0.7.1,  norms 10001-50000  complete & uploaded
          2.0.11.1, norms 10001-50000  complete & uploaded

4. (2021) Q(sqrt(-19)), Q(sqrt(-43))

make tmanin_loop nflist_loop
# 100 ap, level norms 1-1000:
echo 19 0 1 100 1 1 1 1000 | ./tmanin_loop > tmanin.19.out &
grep DIM tmanin.19.out | sed 's/DIMTAB //' > ~/bianchi-data/dims/dimtabeis.19.1-1000
echo 19 -1 1 1000 | ./nflist_loop >  ~/bianchi-data/newforms/newforms.19.1-1000
# See further instructions below

Run 1: 1-1000 complete, 211 newforms, found all 211 curves
Run 2: 1001-8427 complete, 1873 newforms, found 1871/1873 curves
                           missing (44-3a), (41+3a) (these are conjugate)
                           No elliptic curves have the specified 'Traces'
Run 3: 8248-10000 complete, 462 newforms, found all 462 curves

Run 4: On Galois: 10000-15000 in batches of 500, combined output in
tmanin.19.out.10001-15000, made dimtabeis and newforms files.
Updating newdims file: done
Curve search 10k-15k: done, all found: 1386 in IQF/rawcurves.2.0.19.1.10k-15k
Curve processing:
make_all_data_files(read_curves_magma("../IQF/rawcurves.2.0.19.1.10k-15k"),
field_type="IQF", field_label="2.0.19.1.10k-15k", verbose=0) done (on galois).

43: 1-10000 complete, 719 newforms, committed
dimtabnew: done, committed
search: run, 688 curves found, 31 "no curve found"

No elliptic curves have the specified 'Traces' for 31 newforms.  These
include all twists by an off quadratic character (chi(-1)=-1) of thr
"minusform" at level 1.

Curve processing...done

Run 2: 10k-15k on galois & lehner

10k-11k: done tmanin.43.out.10001-11000 on galois
11k-15k: done parallel*10 on lehner

10k-15k: 345 newforms
10k-11k:  462 levels
11k-15k: 1925 levels
10k-15k: 2387 levels in bianchi-data/dims/dimtabeis.43.10001-15000

Forms with no curve to 10k:

2.0.43.1-121.1-a 2.0.43.1-121.3-a 2.0.43.1-256.1-c 2.0.43.1-256.1-d
2.0.43.1-256.1-e 2.0.43.1-256.1-f 2.0.43.1-529.3-a 2.0.43.1-529.1-a
2.0.43.1-961.3-a 2.0.43.1-961.1-a 2.0.43.1-1849.1-b 2.0.43.1-1936.1-a
2.0.43.1-1936.3-a 2.0.43.1-2209.3-a 2.0.43.1-2209.1-a
2.0.43.1-3481.3-a 2.0.43.1-3481.1-a 2.0.43.1-4096.1-d
2.0.43.1-4096.1-e 2.0.43.1-4096.1-f 2.0.43.1-4096.1-g
2.0.43.1-4489.3-a 2.0.43.1-4489.1-a 2.0.43.1-6241.3-a
2.0.43.1-6241.1-a 2.0.43.1-6889.3-a 2.0.43.1-6889.1-a
2.0.43.1-8464.3-a 2.0.43.1-8464.1-a 2.0.43.1-9801.1-a
2.0.43.1-9801.3-a

10k-15k: 341 curves found; 4 newforms have no curve: 10609.3-a
                                                     10609.1-a
                                                     11449.1-a
                                                     11449.3-a

67:
On galois
1-10000 done, output in tmanin.67.out.1-10000
newforms file: done (451)
dims files: done
curve search: done (all 451)
curve processing: done, and all data uploaded

163:
1-1000 complete, 26 newforms, all curves found and processed.
All bmf dims and forms and curves on LMFDB beta.
1001-5000 complete, 85 newforms, 85 curves found, processed.

===========================================================================
odd class numbers >1
===========================================================================

23:
1-1000 complete,  930 newforms,      all curves found, processed, uploaded.
 -2000 complete, 1384 more newforms, all curves found, processed, uploaded.
 -3000 complete, 1429 more newforms, all curves found, processed.
upload files ready:
legendre:ecnf-upload/ec_nfcurves.2.0.23.1.2001-3000
legendre:bmf-upload/bmf_dims.23.2001-3000.no_sl2
legendre:bmf-upload/bmf_forms.23.2001-3000

31:
1-1000 complete, 811 newforms, all curves found, processed, uploaded.
 -5000 complete, 4352 more newforms, all curves found, processed, uploaded.
 reached 5120.19

47:
1-1000 complete to 1000;  dimtabeis.47.all complete 1-1000
1288 newforms, all 1288 curves found, processed
all upload files ready (curves, forms, dims) on legendre

59:
1-1000 complete, 564 newforms, all but 2 curves found, processed
Missing curves: 675.5-b, 675.8-b
files in legendre:bmf-upload, legendre:ecnf-upload
1001-1200 complete, 109 newforms.  No curve search yet.

71:
1-1000 complete, 1774 newforms, all 1774 curves found, processed
files in legendre:bmf-upload, legendre:ecnf-upload

79:
1-1000 complete, 802 newforms, all 802 curves found, processed
files in legendre:bmf-upload, ecnf-upload

echo 79 10 1 1000 | ./nflist_loop | grep data | awk '{print $10;}' | uniq -c

83:
1-1000 complete, 302 newforms, all 302 curves found, processed
files in legendre:bmf-upload, legendre:ecnf-upload

===========================================================================
even class numbers
===========================================================================

5: 1-1000 complete, 100ap, 660 newforms, bmf upload files created, all
660 curves found, processed, committed, ecnf upload files created.

6: atkin: 1-1000 done, 514 newforms, upload files created, curve
search complete, processed, committed, ecnf upload files created.

10: atkin: 1-1000 done. [650 needed ZZ] 338 newforms, upload files
created, curve search complete, processed, committed, ecnf upload
files created.

13: atkin: 1-1000 done. 290 newforms, upload files created, curve
search complete, processed, committed, ecnf upload files created.

14: (C4) galois: 1-1000 done. 862 newforms, data committed &
pushed. Curve search: 856 found, 6 missing, processing complete,
committed, ecnf upload files created.

No curve for:  127.1-a, 127.1-b, 127.2-a, 127.2-b: NOT base-change/twist
               529.1-a, 529.3-a: twist of bc sqrt(7) ???

15: atkin: 1-1000 done. 691 newforms, upload files created, curve
search complete, processed, committed, ecnf upload files created.

17: (C4) 1-1000 done. 776 newforms, comitted and pushed. Curve
 search...found 772, 4 missing. Processed, committed, made upload
 files.

  crash on 2.0.68.1-714.2-a, resuming from 2.0.68.1.714.2-b..

Missing: not bc or bct!
         Isogeny classes 901.1-a, 901.1-b, 901.2-a, 901.2-b

21: atkin: 1-1000 done, 688 newforms, upload files created, curve
search complete, processing complete, committed, ecnf upload files
created.

22: lehner: 1-1000 done. 209 newforms, upload files created, curve
search complete, processed, committed, ecnf upload files created.

35: lehner: 1-1000 done. 431 newforms, upload files created, curve
search complete, processing...done, committed, ecnf upload files
created.

39: (C4) 1-1000: done, 1182 newforms, committed & pushed.  Curve
 search complete, all 1182 found. Processing complete, committed, ecnf
 upload files created.

51: lehner: 1-1000 done. 304 newforms, upload files created, curve
search complete, processing...done, committed, ecnf upload files
created.

55: (C4) 1-1000 done, 863 newforms, committed & pushed. Curve search
 complete, all 863 found.  Processing complete, comitted, ecnf upload
 files created.

87: (C6) 1-1000 done, committed, 1018 newforms. Curve search complete,
 all 1018 found, processing complete, committed, ecnf upload files
 created.

91: fermat: 1-1000 done. 219 newforms, upload files created, curve
search found 217/219 curves, processing complete, committed, ecnf
upload files created.

Missing curves: 784.1-a,b conductor (28) (twists of each other, and
twists of base-change of a form with coeffs in Q(sqrt(6))).

*95: (C8) 1-1000 done. 1759 newforms, committed and pushed.  Curve
 search running... in rawcurves.2.0.95.1 [1756 so far, 3 missing]

 Stuck on 624.5-c...
 Then 624.5-d (twist of previous), then 624.i for i=6,7,...,20
 Second run from 636 (nothing for 625-635), in rawcurves.2.0.95.1.from626: 657 so far
 Stuck on 936.7-d...? !twist of 936.7-c!
 Third run 624.6 - 624.20: done, in rawcurves.2.0.95.1.624.6-625: 20
 Fourth run 936.8-1000: done, in rawcurves.2.0.95.1.936.8-1000: 142
 So far output file rawcurves.2.0.95.1 contains 1757, missing 2:
 624.5-c,
 624.5-d

 processing: reached 900...

-42: (C2xC2): not yet started

Ready for upload (on galois and legendre in ecnf-upload, bmf-upload):

ec_nfcurves.2.0.d.1 for d = 47, 59, 71, 79, 83, 20, 24, 15, 35, 52,
                            40, 51, 88, 84, 91, 56, 55, 68, 39, 87

bmf_dims.d.1-1000.sl2 for d=5
bmf_dims.d.1-1000.no_sl2 for d = 47, 59, 71, 79, 83, 5, 6, 15, 35, 13,
                                 10, 51, 22, 21, 91, 14, 55, 17, 39, 87
bmf_forms.d.1-1000 for d = 47, 59, 71, 79, 83, 5, 6, 15, 35, 13,
                           10, 51, 22, 21, 91, 14, 55, 17, 39, 87


 - and d=23, norms 2000-3000 in:
   bmf-upload/bmf_forms.23.2001-3000
   bmf-upload/bmf_dims.23.2001-3000.no_sl2
   ecnf-upload/ec_nfcurves.2.0.23.1.2001-3000

Still working: 95

========================MISSING CURVES (class number >1)============================

Class number 1, Euclidean: 40, listed in detail in paper with Pacetti et all
2.0.4.1:  4: none are bct but have associated genus 2 QM curves by Schembri
2.0.8.1:  8: all are bct
2.0.3.1: 21: 9 are bct and 12 have associated genus 2 QM curves by Schembri
2.0.7.1:  7: 5 all are bct

Class number 1, Non-Euclidean:
2.0.19.1: 2: 1849.1-a, 1849.3, NOT bct
2.0.43.1:31: all bct

Class number >1:

2.0.56.1-127.1-a NOT twist of bc "No elliptic curve"
2.0.56.1-127.1-b "
2.0.56.1-127.2-a "
2.0.56.1-127.2-b "
2.0.56.1-529.1-a twist of bc of Q(sqrt(7)), CM "No elliptic curve"
2.0.56.1-529.3-b "
2.0.59.1-675.5-b twist of bc of Q "No elliptic curve"
2.0.59.1-675.8-b "
2.0.68.1-901.1-a NOT twist of bc "No elliptic curve"
2.0.68.1-901.1-b "
2.0.68.1-901.2-a "
2.0.68.1-901.2-b "
2.0.91.1-784.1-a twist of bc of Q(sqrt(6)) "No elliptic curve"
2.0.91.1-784.1-b "


NB
2.0.59.1-675.5-b: (+/-)aP+2p = 4, 9, 9, ...
2.0.59.1-675.8-b: (+/-)aP+2p = 4, 9, 9, ...


========================DIMENSION TABLES============================

dimtable: table of all/plus/minus dimensions of weight 2 cusp forms

dims/alldims.*.1-1000: output for level norms up to 1000

dimtabeis: table of plus- dimensions only including eisenstein

dims/dimtabeis.*.out.*: output in range
                        1: 1-50000
                        2: 1-20000
                        3: 1-50000
                        7: 1-20000
                        11: 1-20000

dims/dimtabeis.*.out.*.newdims: output including new cuspidal dimension in range

dimtabnew:  table of trivial character subspace dimensions (field, weight, cuspidal dim, new cuspidal dim)

======================== HOWTO ADD MORE COMPUTED DATA TO DATABASE ============================

After computing Bianchi newforms for field d, levels from N1 to N2:

1. In bianchi-progs directory:

   export d=79
   export D=79
   export N1=1001
   export N2=5000
   echo $d -1 $N1 $N2 | ./nflist_loop >  ~/bianchi-data/newforms/newforms.$d.$N1-$N2

and count using wc -l and check that "data" is not in that file.

2.
   Assuming that we have used tmanin_loop on a range of levels N1-N2,
   there will be an output file called dimtabeis.$d.$N1-$N2. We no
   longer need this for LMFDB upload since we can run dimtabnew (up to
   level norm N2) making a file like dimtabeis.d.all.newdims but
   omitting cols 4 (full dimension) and 7 (eisenstein dimension),
   i.e. just
   field weight level dimcusp dimcuspnew
   e.g.
   23      2       6.1             1               1
   instead of
   23      2       6.1     12      1       1       11

   Instead of:
   mv ~/bianchi-progs/dimtabeis.$d.$N1-$N2 ~/bianchi-data/dims/
   cd ~/bianchi-data/dims/
   cat dimtabeis.$d.$N1-$N2 >> dimtabeis.$d.all
   cd ~/bianchi-progs
   sage
   sage: %runfile bianchi.py
   sage: d=19
   sage: # make dimtabeis.d.all.newdims
   sage: make_dimtabnew(d,"/home/jec/bianchi-data/dims/dimtabeis.{}.all".format(d))

   we can now do this:
   echo $d $N2 | ./dimtabnew >  ~/bianchi-data/dims/dimtabnew.${d}.1-${N2}

   Now follow instructions at the end of bianchi-progs/bianchi.py to
   make the LMFDB upload files:

# e.g. (assumes directory ~/bmf-upload exists)
# sage: %runfile bianchi.py
# sage: d=43 # square-free
# sage: D=43 # abs(disc), either d or 4*d
# sage: N1=1
# sage: N2=1000
# sage: # either (old style)
# sage: dimdat = read_dimtabeis_new(d, "dimtabeis.{}.all.newdims".format(d))
# sage: # or (new style)
# sage: dimdat = read_dimtabeis_new(d, "dimtabnew.{}.{}-{}".format(d, N1, N2))
# sage: sl2_levels = []
# sage: if D in [1,2,3,7,11,19,43,67,163,20]:
# sage:    sl2_levels = read_data("sl2_levels_{}".format(D), str)
# sage:    write_bmf_upload_file(dimdat, "bmf_dims.{}.{}-{}.sl2".format(d,N1,N2), 'dims', sl2=True)
# sage: write_bmf_upload_file(dimdat, "bmf_dims.{}.{}-{}.no_sl2".format(d,N1,N2), 'dims', sl2=False)
# sage: formdat = read_newforms(d, "newforms.{}.{}-{}".format(d,N1,N2))
# sage: write_bmf_upload_file(formdat, "bmf_forms.{}.{}-{}".format(d,N1,N2), 'forms', True)

# Copy the three files to legendre in bmf-upload/.
# Do the upload as follows:
# sage: from lmfdb import db
# sage: d=43
# sage: N1=1
# sage: N2=1000
# sage: db.bmf_forms.copy_from("/scratch/home/jcremona/bmf-upload/bmf_forms.{}.{}-{}".format(d,N1,N2))
# sage: db.bmf_dims.update_from_file("/scratch/home/jcremona/bmf-upload/bmf_dims.{}.{}-{}.sl2".format(d,N1,N2))
# sage: db.bmf_dims.copy_from("/scratch/home/jcremona/bmf-upload/bmf_dims.{}.{}-{}.no_sl2".format(d,N1,N2))


3. cd ~/bianchi-data
   git add 2.0.$D.1 # add the raw newform data files
   git add newforms/newforms.$d.$N1-$N2
   git add dims/dimtabnew.${d}.1-${N2}
   # or git add dims/dimtabeis.${d}.all
   git commit -m "..."
   git push origin master

4. (Can be done on another machine, if so "git pull origin master" in bianchi-data first)

   cd ecnf-data/sage
   sage
   sage: %runfile search.py
   sage: # field: int, e.g. 19
   sage: magma_search(field,bmf_filename="...", outfilename="...", verbose=False)
   sage: # eg
   sage: d=5
   sage: D=20
   sage: magma_search(d, bmf_filename="/home/jec/bianchi-data/newforms/newforms.{}.1-1000".format(d), outfilename="rawcurves.2.0.{}.1".format(D), verbose=True)

   Move the rawcurves file to ECNF_DIR/IQF
   Add the field if necessary to ECNF_DIR/sage/ecnf_fields and ECNF_DIR/IQF/fields.txt
   Process the raw curves file:

   sage: %runfile files.py
   sage: d=6
   sage: D=24
   sage: field_label = '2.0.{}.1'.format(D)
   sage: rawcurvesfile = ".".join(['rawcurves', field_label])
   sage: data = read_curves_magma(ECNF_DIR+"/IQF/"+rawcurvesfile)
   sage: curves = make_all_data_files1(data, field_type='IQF', field_label=field_label, verbose=0, prec=128)

   sage: # to make upload files
   sage: %runfile upload.py
   sage: make_upload_file(['IQF'], [field_label], outfilename='ec_nfcurves.'+field_label)

# Do the upload as follows:
# sage: from lmfdb import db
# sage: D=43 # discriminant, as in field label
#
# Either (for a new field) upload all curves in a file:
#
# sage: db.ec_nfcurves.copy_from("/scratch/home/jcremona/ecnf-upload/ec_nfcurves.2.0.{}.1".format(D))
#
# Or (for an existing field), upload curves in a file):
#
# sage: N1=1
# sage: N2=1000
# sage: db.ec_nfcurves.copy_from("/scratch/home/jcremona/ecnf-upload/ec_nfcurves.2.0.{}.1.{}-{}".format(D,N1,N2))
